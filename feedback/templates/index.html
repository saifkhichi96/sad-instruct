{% extends "_layouts/base.html" %}

<style>
    .card {
        border: 1px solid #ccc;
        border-radius: 32px;
        background-color: #f9f9f9;
    }
</style>


{% block content %}
<div class="container p-4">
    <h1>Feedback for Scenario Dataset</h1>
    <p>The following data was automatically generated by a Large Language Model (LLM). Each instance lists a scenario/task that a person may want to perform in a given environment, together with a list of objects present in the environment. The objects that the LLM believes will be used in this scenario are pre-selected. Please review the list of objects and check/uncheck the objects that you think are relevant/irrelevant to the scenario. Once you are done, click the "Submit" button to submit your feedback.</p>
    <p><b>3RScan Sample ID:</b> {{ file_name | replace('.json', '') }}</p>
    <p><b>Status:</b> {{ num_files_done }} / {{ num_files_total }} files done</p>
    <form method="post" action="{{ url_for('submit') }}">
        <input type="hidden" name="file_name" value="{{ file_name }}">
        {% for item in data %}
        {% set scenario_index = loop.index0 %}
        <div class="card p-4 mb-4">
            <h2>{{ item['scan'] }}</h2>
            <p>{{ item['scenario'] }}</p>
            <span>
                {% for obj in item['objects'] %}
                {% set object_index = loop.index0 %}
                <label>
                    {% set checked = 'checked' if obj['selected'] else '' %}
                    <input type="checkbox" name="object-{{ scenario_index }}-{{ object_index }}" value="{{ obj['label'] }}" {{ checked }}>
                    {{ obj['label'] }}
                </label>
                {% endfor %}
            </span>
        </div>
        {% endfor %}
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
</div>
{% endblock %}